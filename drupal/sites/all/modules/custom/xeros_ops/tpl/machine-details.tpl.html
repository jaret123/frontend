<div class="machine-detail__wrapper {{statusFormat machine.status.status_code machine.machine_status "color"}} {{machine.manufacturer}}" data-machine-status={{machine.machine_status}}>
    <i class="fa fa-times machine-detail__close"></i>
    <div class="machine-detail__header">
        <div>
            <i class="icon-Washer"></i>
        </div>
        <div>
            <!--<i class="fa fa-print icon-print"></i>-->
            <h3 class="machine-detail__title">{{machine.machine_name}}</h3>
            <div class="manufacturer">{{machine.manufacturer}}</div>
        </div>
    </div>

    <div class="description">
        {{machine.notes}}
    </div>

    <div class="status status-not-monitored">
        <h4>Status</h4>
        <div class=" status-message">
            <i class="fa status-icon"></i>
            <script type="application/javascript">Drupal.t('This machine is currently not actively monitored.');</script>
        </div>
        <!--<div class="silence">-->
        <!--<i class="fa fa-pause icon-silence"></i>Pause Alarm-->
        <!--</div>-->
    </div>

    <div class="status status-monitored">
        <h4>Status</h4>
        <div class=" status-message">
            <i class="fa status-icon"></i>
            {{statusFormat machine.status.status_code machine.machine_status "code"}} -
            <span class="log__timestamp">{{machine.status.time_stamp}} - </span>
            <span class="log__message">{{machine.status.status_message}}</span>
        </div>
        <!--<div class="silence">-->
            <!--<i class="fa fa-pause icon-silence"></i>Pause Alarm-->
        <!--</div>-->
    </div>

    <h4 class="log__title"><script type="application/javascript">Drupal.t('View Status Log');</script> <i class="fa fa-chevron-down log__open-close"></i></h4>
    <div class="log">
        {{#each history}}
        <div class="log__row">
            <div class="log__timestamp">{{1.time_stamp}} - </div>
            <div class="log__status">{{statusFormat 1.status_code "code"}} - </div>
            <div class="log__message">{{1.status_message}}</div>
        </div>
        {{/each}}
    </div>

    <div class="details">
        <h4 class="machine-detail__location"><script type="application/javascript">Drupal.t('Machine Details');</script></h4>
        Company: {{machine.company_title}}<br/>
        Location: {{machine.location_title}}<br/>
        Serial Number: {{machine.serial_number}}
    </div>

    <!-- TODO: Get the cycles for the machine for the day -->
    <div class="machine-detail__cycles">
        <h4>Cycles</h4>
        <h5>Summary</h5>
        <span class="label">Last Cycle Ended:</span>{{last_cycle_end_time}}<br/>
        <span class="label">Cycles Today:</span>{{machine.usage.cycles}}<br/>
        <span class="label">Total Run Time Today:</span>{{runTimeFormat machine.usage.run_time}}<br/>

        <h5>Details</h5>
        {{#each cycles}}
        <div>
            <div class="cycle__status"><em>{{classification_name}}</em></div>
            <div class="cycle__timestamp"><span class="label"><script type="application/javascript">Drupal.t('Start Time');</script>:</span>{{cycle_start_time}}</div>
            <div class="cycle__timestamp"><span class="label"><script type="application/javascript">Drupal.t('End Time');</script>:</span>{{cycle_end_time}}</div>
            <!-- Gallons are already rounded by the web service -->
            <div class="cycle__detail"><span class="label"><script type="application/javascript">Drupal.t('Cold Water Used');</script>:</span>{{round cycle_cold_water_volume 1}} <script type="application/javascript">Drupal.t('gallons');</script></div>
            <div class="cycle__detail"><span class="label"><script type="application/javascript">Drupal.t('Hot Water Used');</script>:</span>{{round cycle_hot_water_volume 1}} <script type="application/javascript">Drupal.t('gallons');</script></div>
            <div class="cycle__detail"><span class="label"><script type="application/javascript">Drupal.t('Therms');</script>:</span>{{round cycle_therms 2}}</div>
            <div class="cycle__detail"><span class="label"><script type="application/javascript">Drupal.t('Chemicals');</script>:</span>{{round cycle_chemical_strength 1}} ounces</div>
        </div>
        <br/>
        {{/each}}
    </div>

</div>